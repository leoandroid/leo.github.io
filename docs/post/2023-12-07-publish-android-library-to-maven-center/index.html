<!DOCTYPE html>
<html lang="en-us">
<head><script src="/leoandroid/leo.github.io/livereload.js?mindelay=10&amp;v=2&amp;port=54865&amp;path=leoandroid/leo.github.io/livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script type="application/javascript" src='http://localhost:54865/leoandroid/leo.github.io/js/theme-mode.js'></script>
    <link rel="stylesheet" href='http://localhost:54865/leoandroid/leo.github.io/css/frameworks.min.css' />
    <link rel="stylesheet" href='http://localhost:54865/leoandroid/leo.github.io/css/github.min.css' />
    <link rel="stylesheet" href='http://localhost:54865/leoandroid/leo.github.io/css/github-style.css' />
    <link rel="stylesheet" href='http://localhost:54865/leoandroid/leo.github.io/css/light.css' />
    <link rel="stylesheet" href='http://localhost:54865/leoandroid/leo.github.io/css/dark.css' />
    <link rel="stylesheet" href='http://localhost:54865/leoandroid/leo.github.io/css/syntax.css' />
    <title>上传 Android Library 到 Maven Center - Leo Blogs</title>
    
    <link rel="icon" type="image/x-icon" href='http://localhost:54865/leoandroid/leo.github.io/images/favicon.ico'>
    
    <meta name="theme-color" content="#1e2327">

    
    

    
    <meta name="description"
  content="过时废弃，声明如下{:.error}
文档 Gradle signing plugin GnuPG downloads Open pgp 准备工作 我们上传本地 Library 到 Maven Central, 需要一下几项工作：
创建 Sonatype 账号，创建Issue 签名 OpenPGP Library build.gradle 配置 上传 Library 到 Sonatype Sonatype 配置 创建 Sonatype 账号 打开 https://issues.sonatype.org/secure/Signup!default.jspa 创建账号 创建 Issue 点击 Create按钮创建 Issue. 如果你用Github 创建Issue 这几个选项需要按如下规则填写：
**Group Id:**io.github.username Project URL:https://github.com/username/project SCM url:https://github.com/username/project.git 否则他会提示你创建错误，让你进行修改
[Permalink](https://issues.sonatype.org/browse/OSSRH-86976?focusedCommentId=1224850&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-1224850) [Bot Central-OSSRH](https://issues.sonatype.org/secure/ViewProfile.jspa?name=central-ossrh) added a comment - 2 days ago To register this Group Id you must prove ownership of the domain leo.com. Please complete the following steps to continue: 1. **Add a DNS TXT record to your domain** with the text: OSSRH-86555. Please read [https://central.sonatype.org/faq/how-to-set-txt-record/](https://central.sonatype.org/faq/how-to-set-txt-record/) 2. **Edit this ticket** and set Status to Open. More info: [https://central.sonatype.org/publish/](https://central.sonatype.org/publish/) If you do not own this domain, **you may also choose a different Group Id that reflects your project hosting. io.github.username would be valid based on your Project URL.** To continue the registration process, please follow these steps: 1. Create a temporary, public repository called [https://github.com/username/OSSRH-86555](https://github.com/username/OSSRH-86555) to verify github account ownership. 2. **Edit this ticket**, update the Group ID field with the new GroupId, and set Status to Open. More info: [https://central.sonatype.org/publish/requirements/coordinates/](https://central.sonatype.org/publish/requirements/coordinates/) Issue RESOLVED后，你就可以登录 https://s01.oss.sonatype.org/#welcome 准备上传Lirary了。
" />
<meta name="keywords"
  content='' />
<meta name="robots" content="noodp" />
<link rel="canonical" href="http://localhost:54865/leoandroid/leo.github.io/post/2023-12-07-publish-android-library-to-maven-center/" />


<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="上传 Android Library 到 Maven Center - Leo Blogs" />
<meta name="twitter:description"
  content="过时废弃，声明如下{:.error}
文档 Gradle signing plugin GnuPG downloads Open pgp 准备工作 我们上传本地 Library 到 Maven Central, 需要一下几项工作：
创建 Sonatype 账号，创建Issue 签名 OpenPGP Library build.gradle 配置 上传 Library 到 Sonatype Sonatype 配置 创建 Sonatype 账号 打开 https://issues.sonatype.org/secure/Signup!default.jspa 创建账号 创建 Issue 点击 Create按钮创建 Issue. 如果你用Github 创建Issue 这几个选项需要按如下规则填写：
**Group Id:**io.github.username Project URL:https://github.com/username/project SCM url:https://github.com/username/project.git 否则他会提示你创建错误，让你进行修改
[Permalink](https://issues.sonatype.org/browse/OSSRH-86976?focusedCommentId=1224850&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-1224850) [Bot Central-OSSRH](https://issues.sonatype.org/secure/ViewProfile.jspa?name=central-ossrh) added a comment - 2 days ago To register this Group Id you must prove ownership of the domain leo.com. Please complete the following steps to continue: 1. **Add a DNS TXT record to your domain** with the text: OSSRH-86555. Please read [https://central.sonatype.org/faq/how-to-set-txt-record/](https://central.sonatype.org/faq/how-to-set-txt-record/) 2. **Edit this ticket** and set Status to Open. More info: [https://central.sonatype.org/publish/](https://central.sonatype.org/publish/) If you do not own this domain, **you may also choose a different Group Id that reflects your project hosting. io.github.username would be valid based on your Project URL.** To continue the registration process, please follow these steps: 1. Create a temporary, public repository called [https://github.com/username/OSSRH-86555](https://github.com/username/OSSRH-86555) to verify github account ownership. 2. **Edit this ticket**, update the Group ID field with the new GroupId, and set Status to Open. More info: [https://central.sonatype.org/publish/requirements/coordinates/](https://central.sonatype.org/publish/requirements/coordinates/) Issue RESOLVED后，你就可以登录 https://s01.oss.sonatype.org/#welcome 准备上传Lirary了。
" />
<meta name="twitter:site" content="http://localhost:54865/leoandroid/leo.github.io/" />
<meta name="twitter:creator" content="" />
<meta name="twitter:image"
  content="http://localhost:54865/leoandroid/leo.github.io/">


<meta property="og:type" content="article" />
<meta property="og:title" content="上传 Android Library 到 Maven Center - Leo Blogs">
<meta property="og:description"
  content="过时废弃，声明如下{:.error}
文档 Gradle signing plugin GnuPG downloads Open pgp 准备工作 我们上传本地 Library 到 Maven Central, 需要一下几项工作：
创建 Sonatype 账号，创建Issue 签名 OpenPGP Library build.gradle 配置 上传 Library 到 Sonatype Sonatype 配置 创建 Sonatype 账号 打开 https://issues.sonatype.org/secure/Signup!default.jspa 创建账号 创建 Issue 点击 Create按钮创建 Issue. 如果你用Github 创建Issue 这几个选项需要按如下规则填写：
**Group Id:**io.github.username Project URL:https://github.com/username/project SCM url:https://github.com/username/project.git 否则他会提示你创建错误，让你进行修改
[Permalink](https://issues.sonatype.org/browse/OSSRH-86976?focusedCommentId=1224850&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-1224850) [Bot Central-OSSRH](https://issues.sonatype.org/secure/ViewProfile.jspa?name=central-ossrh) added a comment - 2 days ago To register this Group Id you must prove ownership of the domain leo.com. Please complete the following steps to continue: 1. **Add a DNS TXT record to your domain** with the text: OSSRH-86555. Please read [https://central.sonatype.org/faq/how-to-set-txt-record/](https://central.sonatype.org/faq/how-to-set-txt-record/) 2. **Edit this ticket** and set Status to Open. More info: [https://central.sonatype.org/publish/](https://central.sonatype.org/publish/) If you do not own this domain, **you may also choose a different Group Id that reflects your project hosting. io.github.username would be valid based on your Project URL.** To continue the registration process, please follow these steps: 1. Create a temporary, public repository called [https://github.com/username/OSSRH-86555](https://github.com/username/OSSRH-86555) to verify github account ownership. 2. **Edit this ticket**, update the Group ID field with the new GroupId, and set Status to Open. More info: [https://central.sonatype.org/publish/requirements/coordinates/](https://central.sonatype.org/publish/requirements/coordinates/) Issue RESOLVED后，你就可以登录 https://s01.oss.sonatype.org/#welcome 准备上传Lirary了。
" />
<meta property="og:url" content="http://localhost:54865/leoandroid/leo.github.io/post/2023-12-07-publish-android-library-to-maven-center/" />
<meta property="og:site_name" content="上传 Android Library 到 Maven Center" />
<meta property="og:image"
  content="http://localhost:54865/leoandroid/leo.github.io/">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2023-12-06 00:00:00 &#43;0000 UTC" />











</head>


<body>
  <div style="position: relative">
  <header class="Header js-details-container Details px-3 px-md-4 px-lg-5 flex-wrap flex-md-nowrap open Details--on">
    <div class="Header-item mobile-none" style="margin-top: -4px; margin-bottom: -4px;">
      <a class="Header-link" href="http://localhost:54865/leoandroid/leo.github.io/">
        <img class="octicon" height="32" width="32" src="">
      </a>
    </div>
    <div class="Header-item d-md-none">
      <button class="Header-link btn-link js-details-target" type="button"
        onclick="document.querySelector('#header-search').style.display = document.querySelector('#header-search').style.display == 'none'? 'block': 'none'">
        <svg height="24" class="octicon octicon-three-bars" viewBox="0 0 16 16" version="1.1" width="24">
          <path fill-rule="evenodd" d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z">
          </path>
        </svg>
      </button>
    </div>
    <div style="display: none;" id="header-search"
      class="Header-item Header-item--full flex-column flex-md-row width-full flex-order-2 flex-md-order-none mr-0 mr-md-3 mt-3 mt-md-0 Details-content--hidden-not-important d-md-flex">
      <div
        class="Header-search header-search flex-auto js-site-search position-relative flex-self-stretch flex-md-self-auto mb-3 mb-md-0 mr-0 mr-md-3 scoped-search site-scoped-search js-jump-to">
        <div class="position-relative">
          
          <form target="_blank" action="https://www.google.com/search" accept-charset="UTF-8" method="get"
            autocomplete="off">
            <label
              class="Header-search-label form-control input-sm header-search-wrapper p-0 js-chromeless-input-container header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center">
              <input type="text"
                class="Header-search-input form-control input-sm header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable"
                name="q" value="" placeholder="Search" autocomplete="off">
              <input type="hidden" name="q" value="site:http://localhost:54865/leoandroid/leo.github.io/">
            </label>
          </form>
          
        </div>
      </div>
    </div>

    <div class="Header-item Header-item--full flex-justify-center d-md-none position-relative">
      <a class="Header-link " href="http://localhost:54865/leoandroid/leo.github.io/">
        <img class="octicon octicon-mark-github v-align-middle" height="32" width="32" src="">
      </a>
    </div>
    <div class="Header-item" style="margin-right: 0;">
      <a href="javascript:void(0)" class="Header-link no-select" onclick="switchTheme()">
        <svg style="fill: var(--color-profile-color-modes-toggle-moon);" class="no-select" viewBox="0 0 16 16"
          version="1.1" width="16" height="16">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M4.52208 7.71754C7.5782 7.71754 10.0557 5.24006 10.0557 2.18394C10.0557 1.93498 10.0392 1.68986 10.0074 1.44961C9.95801 1.07727 10.3495 0.771159 10.6474 0.99992C12.1153 2.12716 13.0615 3.89999 13.0615 5.89383C13.0615 9.29958 10.3006 12.0605 6.89485 12.0605C3.95334 12.0605 1.49286 10.001 0.876728 7.24527C0.794841 6.87902 1.23668 6.65289 1.55321 6.85451C2.41106 7.40095 3.4296 7.71754 4.52208 7.71754Z">
          </path>
        </svg>
      </a>
    </div>
  </header>
</div>

  <div id="search-result" class="container-lg px-3 new-discussion-timeline" style="display: none;">
</div>

  
<div class="application-main">
  <div>
  <main>
    <div class="gisthead pagehead bg-gray-light pb-0 pt-3 mb-4">
      <div class="px-0">
        <div class="mb-3 d-flex px-3 px-md-3 px-lg-5">
          <div class="flex-auto min-width-0 width-fit mr-3">
            <div class="d-flex">
              <div class="d-none d-md-block">
                <a class="avatar mr-2 flex-shrink-0" href="http://localhost:54865/leoandroid/leo.github.io/">
                  <img class=" avatar-user"
                    src="http://localhost:54865/leoandroid/leo.github.io/images/avatar.png"
                    width="32" height="32"></a>
              </div>
              <div class="d-flex flex-column">
                <h1 class="break-word f3 text-normal mb-md-0 mb-1">
                  <span class="author">
                    <a href="http://localhost:54865/leoandroid/leo.github.io/"></a>
                  </span>
                  <span class="path-divider">/</span>
                  <strong class="css-truncate css-truncate-target mr-1" style="max-width: 410px">
                    <a href="http://localhost:54865/leoandroid/leo.github.io/post/2023-12-07-publish-android-library-to-maven-center/">上传 Android Library 到 Maven Center</a>
                  </strong>
                </h1>
                <div class="note m-0">
                  Created <relative-time datetime="Wed, 06 Dec 2023 00:00:00 &#43;0000"
                    class="no-wrap">
                    Wed, 06 Dec 2023 00:00:00 &#43;0000</relative-time>

                  
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container-lg px-3 new-discussion-timeline">
      <div class="repository-content gist-content">
        <div>
          <div class="js-gist-file-update-container js-task-list-container file-box">
            <div id="file-pytest" class="file my-2">
              <div id="post-header" class="file-header d-flex flex-md-items-center flex-items-start sticky-header" style="z-index: 2">
                <div class="file-info d-flex flex-md-items-center flex-items-start flex-order-1 flex-auto">
                  <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">
                    
                    <summary id="toc-toggle" onclick="clickToc()" class="btn btn-octicon m-0 mr-2 p-2">
                      <svg aria-hidden="true" viewBox="0 0 16 16" height="16" width="16" class="octicon octicon-list-unordered">
                        <path fill-rule="evenodd" d="M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zM3 8a1 1 0 11-2 0 1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z"></path>
                      </svg>
                    </summary>
                    <details-menu class="SelectMenu" id="toc-details" style="display: none;">
                      <div class="SelectMenu-modal rounded-3 mt-1" style="max-height: 340px;">
                        <div class="SelectMenu-list SelectMenu-list--borderless p-2" style="overscroll-behavior: contain;" id="toc-list">
                        </div>
                      </div>
                    </details-menu>
                      1709 Words
                    

                  </div>
                  <div class="file-actions flex-order-2 pt-0">
                    
                    
                    <a class="muted-link mr-3" href="../../tags/%E5%BA%9F%E5%BC%83">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      废弃
                    </a>
                    
                    
                  </div>
                </div>
              </div>


              <div class="Box-body px-5 pb-5" style="z-index: 1">
                <article class="markdown-body entry-content container-lg"><p><code>过时废弃，声明如下</code>{:.error}</p>
<!-- raw HTML omitted -->
<h2 id="文档">文档</h2>
<ol>
<li><a href="https://docs.gradle.org/current/userguide/signing_plugin.html">Gradle signing plugin</a></li>
<li><a href="https://www.gnupg.org/download/index.html">GnuPG downloads</a></li>
<li><a href="https://keys.openpgp.org/">Open pgp</a></li>
</ol>
<h2 id="准备工作">准备工作</h2>
<p>我们上传本地 Library 到 Maven Central, 需要一下几项工作：</p>
<ol>
<li>创建 <a href="https://issues.sonatype.org/secure/Dashboard.jspa">Sonatype</a> 账号，创建Issue</li>
<li>签名 <a href="https://en.wikipedia.org/wiki/Pretty_Good_Privacy#OpenPGP">OpenPGP</a></li>
<li>Library build.gradle 配置</li>
<li>上传 Library 到 <a href="https://issues.sonatype.org/secure/Dashboard.jspa">Sonatype</a></li>
</ol>
<h3 id="sonatype-配置">Sonatype 配置</h3>
<h4 id="创建-sonatype-账号">创建 <a href="https://issues.sonatype.org">Sonatype</a> 账号</h4>
<p>打开 <a href="https://issues.sonatype.org/secure/Signup!default.jspa">https://issues.sonatype.org/secure/Signup!default.jspa</a> 创建账号
<img src="assets/images/sonatype-start.png" alt="sonatype-start"></p>
<h4 id="创建-issue">创建 Issue</h4>
<p>点击 <strong>Create</strong>按钮创建 Issue. 如果你用Github 创建Issue 这几个选项需要按如下规则填写：</p>
<ul>
<li>**Group Id:**io.github.username</li>
<li><strong>Project URL:</strong><a href="https://github.com/fengshenyanyi/Logcat">https://github.com/username/</a>project</li>
<li><strong>SCM url:</strong><a href="https://github.com/fengshenyanyi/Logcat.git">https://github.com/username/project.git</a>
<img src="assets/images/sonatype-create.png" alt="sonatype-create"></li>
</ul>
<p>否则他会提示你创建错误，让你进行修改</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>[Permalink](https://issues.sonatype.org/browse/OSSRH-86976?focusedCommentId=1224850&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-1224850)
</span></span><span style="display:flex;"><span>[Bot Central-OSSRH](https://issues.sonatype.org/secure/ViewProfile.jspa?name=central-ossrh) added a comment - 2 days ago
</span></span><span style="display:flex;"><span>To register this Group Id you must prove ownership of the domain leo.com. Please complete the following steps to continue:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>1. **Add a DNS TXT record to your domain** with the text: OSSRH-86555. Please read [https://central.sonatype.org/faq/how-to-set-txt-record/](https://central.sonatype.org/faq/how-to-set-txt-record/)
</span></span><span style="display:flex;"><span>2. **Edit this ticket** and set Status to Open.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>More info: [https://central.sonatype.org/publish/](https://central.sonatype.org/publish/)
</span></span><span style="display:flex;"><span>If you do not own this domain, **you may also choose a different Group Id that reflects your project hosting. io.github.username would be valid based on your Project URL.**
</span></span><span style="display:flex;"><span>To continue the registration process, please follow these steps:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>1. Create a temporary, public repository called [https://github.com/username/OSSRH-86555](https://github.com/username/OSSRH-86555) to verify github account ownership.
</span></span><span style="display:flex;"><span>2. **Edit this ticket**, update the Group ID field with the new GroupId, and set Status to Open.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>More info: [https://central.sonatype.org/publish/requirements/coordinates/](https://central.sonatype.org/publish/requirements/coordinates/)
</span></span></code></pre></div><p>Issue <strong>RESOLVED</strong>后，你就可以登录 <a href="https://s01.oss.sonatype.org/#welcome">https://s01.oss.sonatype.org/#welcome</a> 准备上传Lirary了。</p>
<h3 id="openpgp-签名">OpenPGP 签名</h3>
<p>Gradle <a href="https://docs.gradle.org/current/userguide/signing_plugin.html">Signing Plugin</a> 现在只支持 <a href="https://en.wikipedia.org/wiki/Pretty_Good_Privacy#OpenPGP">OpenPGP</a> 签名，同时这也是 Macven central 要求的签名方式。</p>
<blockquote>
<p>The Signing Plugin currently only provides support for generating <a href="https://en.wikipedia.org/wiki/Pretty_Good_Privacy#OpenPGP">OpenPGP signatures</a> (which is the signature format <a href="http://central.sonatype.org/pages/requirements.html#sign-files-with-gpgpgp">required for publication to the Maven Central Repository</a>).</p></blockquote>
<p>我们使用 Gradle <a href="https://docs.gradle.org/current/userguide/signing_plugin.html#sec:in-memory-keys">in-memory ascii-armored keys</a> 进行签名. 所以只需要配置 signingKey 和 signingPassword 即可。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-groovy" data-lang="groovy"><span style="display:flex;"><span>signing <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  	<span style="color:#66d9ef">def</span> signingKey <span style="color:#f92672">=</span> findProperty<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;GPG_SIGNING_KEY&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> signingPassword <span style="color:#f92672">=</span> findProperty<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;GPG_SIGNING_PASSWORD&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>    useInMemoryPgpKeys<span style="color:#f92672">(</span>signingKey<span style="color:#f92672">,</span> signingPassword<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>    sign publishing<span style="color:#f92672">.</span><span style="color:#a6e22e">publications</span><span style="color:#f92672">.</span><span style="color:#a6e22e">release</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><h4 id="1-下载-gnupg">1: 下载 GnuPG</h4>
<p>执行<code>brew install gnupg@2.2</code>下载GnuPG，也可以直接到 <a href="https://docs.gradle.org/current/userguide/signing_plugin.html">Gradle signing plugin</a> 下载。
brew 下载需要版本号，如果不确定版本号可以执行 <code>brew search gnupg</code> 搜索</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>/: brew search gnupg
</span></span><span style="display:flex;"><span><span style="color:#f92672">==</span>&gt; Formulae
</span></span><span style="display:flex;"><span>gnupg                      gnupg@1.4                  gnu-go
</span></span><span style="display:flex;"><span>gnupg-pkcs11-scd           gnupg@2.2
</span></span><span style="display:flex;"><span>/: brew install gnupg@2.2
</span></span><span style="display:flex;"><span>Running <span style="color:#e6db74">`</span>brew update --preinstall<span style="color:#e6db74">`</span>...
</span></span></code></pre></div><p>下载完成后可以通过 <code>gpg --version</code> 查看是否安装成功。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>/: gpg --version
</span></span><span style="display:flex;"><span>gpg <span style="color:#f92672">(</span>GnuPG<span style="color:#f92672">)</span> 2.3.8
</span></span><span style="display:flex;"><span>libgcrypt 1.10.1
</span></span><span style="display:flex;"><span>Copyright <span style="color:#f92672">(</span>C<span style="color:#f92672">)</span> <span style="color:#ae81ff">2021</span> Free Software Foundation, Inc.
</span></span><span style="display:flex;"><span>License GNU GPL-3.0-or-later &lt;https://gnu.org/licenses/gpl.html&gt;
</span></span><span style="display:flex;"><span>This is free software: you are free to change and redistribute it.
</span></span><span style="display:flex;"><span>There is NO WARRANTY, to the extent permitted by law.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Home: /Users/username/.gnupg
</span></span><span style="display:flex;"><span>Supported algorithms:
</span></span><span style="display:flex;"><span>Pubkey: RSA, ELG, DSA, ECDH, ECDSA, EDDSA
</span></span><span style="display:flex;"><span>Cipher: IDEA, 3DES, CAST5, BLOWFISH, AES, AES192, AES256, TWOFISH,
</span></span><span style="display:flex;"><span>CAMELLIA128, CAMELLIA192, CAMELLIA256
</span></span><span style="display:flex;"><span>AEAD: EAX, OCB
</span></span><span style="display:flex;"><span>Hash: SHA1, RIPEMD160, SHA256, SHA384, SHA512, SHA224
</span></span><span style="display:flex;"><span>Compression: Uncompressed, ZIP, ZLIB, BZIP2
</span></span></code></pre></div><h4 id="2生成秘钥">2：生成秘钥</h4>
<p>执行<code>gpg --gen-key</code>生成秘钥，如果不会可以参照 <a href="https://docs.github.com/en/authentication/managing-commit-signature-verification/generating-a-new-gpg-key">Generating a new GPG key</a>。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>/: gpg --gen-key
</span></span><span style="display:flex;"><span>gpg <span style="color:#f92672">(</span>GnuPG<span style="color:#f92672">)</span> 2.3.8; Copyright <span style="color:#f92672">(</span>C<span style="color:#f92672">)</span> <span style="color:#ae81ff">2021</span> Free Software Foundation, Inc.
</span></span><span style="display:flex;"><span>This is free software: you are free to change and redistribute it.
</span></span><span style="display:flex;"><span>There is NO WARRANTY, to the extent permitted by law.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Note: Use <span style="color:#e6db74">&#34;gpg --full-generate-key&#34;</span> <span style="color:#66d9ef">for</span> a full featured key generation dialog.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>GnuPG needs to construct a user ID to identify your key.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Real name: Leo
</span></span><span style="display:flex;"><span>Email address: your-email@gmail.com
</span></span><span style="display:flex;"><span>You selected this USER-ID:
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;Leo &lt;your-email@gmail.com&gt;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Change <span style="color:#f92672">(</span>N<span style="color:#f92672">)</span>ame, <span style="color:#f92672">(</span>E<span style="color:#f92672">)</span>mail, or <span style="color:#f92672">(</span>O<span style="color:#f92672">)</span>kay/<span style="color:#f92672">(</span>Q<span style="color:#f92672">)</span>uit? O
</span></span><span style="display:flex;"><span>We need to generate a lot of random bytes. It is a good idea to perform
</span></span><span style="display:flex;"><span>some other action <span style="color:#f92672">(</span>type on the keyboard, move the mouse, utilize the
</span></span><span style="display:flex;"><span>disks<span style="color:#f92672">)</span> during the prime generation; this gives the random number
</span></span><span style="display:flex;"><span>generator a better chance to gain enough entropy.
</span></span></code></pre></div><p>输入 O 后会提示你设置密码
<img src="assets/images/sonatype-password.png" alt="sonatype-password"></p>
<ol>
<li>执行<code>gpg -K</code>查看生成的秘钥.
其中 sec 的 <strong>58C3084CA8EF5DA8724421A0F50141723D0E90A8</strong> 为KeyID</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>/: gpg -K
</span></span><span style="display:flex;"><span>/Users/username/.gnupg/pubring.kbx
</span></span><span style="display:flex;"><span>----------------------------------------
</span></span><span style="display:flex;"><span>sec   rsa1024 2022-12-14 <span style="color:#f92672">[</span>SC<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>      58C3084CA8EF5DA8724421A0F50141723D0E90A8
</span></span><span style="display:flex;"><span>uid           <span style="color:#f92672">[</span>ultimate<span style="color:#f92672">]</span> Leo <span style="color:#f92672">(</span>Logcat<span style="color:#f92672">)</span> &lt;email@gmail.com&gt;
</span></span><span style="display:flex;"><span>ssb   rsa1024 2022-12-14 <span style="color:#f92672">[</span>E<span style="color:#f92672">]</span>
</span></span></code></pre></div><h4 id="3添加-gpg_signing_keygpg_signing_password-到-gradleproperties">3：添加 GPG_SIGNING_KEY/GPG_SIGNING_PASSWORD 到 gradle.properties</h4>
<p>添加 GPG_SIGNING_KEY 到 /Users/leo.zhang/.gradle/gradle.properties</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>/: gpg --armor --export-secret-keys email@gmail.com  | awk <span style="color:#e6db74">&#39;NR == 1 { print &#34;GPG_SIGNING_KEY=&#34; } 1&#39;</span> ORS<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;\\n\\n&#39;</span> &gt;&gt; gradle.properties
</span></span></code></pre></div><p>添加 GPG_SIGNING_PASSWORD 到 /Users/leo.zhang/.gradle/gradle.properties</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-groovy" data-lang="groovy"><span style="display:flex;"><span><span style="color:#75715e">// 执行命令后自动添加的 private key.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>GPG_SIGNING_KEY<span style="color:#f92672">=</span><span style="color:#960050;background-color:#1e0010">\</span>n<span style="color:#960050;background-color:#1e0010">\</span>n<span style="color:#f92672">-----</span>BEGIN PGP PRIVATE KEY BLOCK<span style="color:#f92672">-----</span><span style="color:#66d9ef">private</span> key content<span style="color:#f92672">-----</span>END PGP PRIVATE KEY BLOCK<span style="color:#f92672">-----</span><span style="color:#960050;background-color:#1e0010">\</span>n<span style="color:#960050;background-color:#1e0010">\</span>n
</span></span><span style="display:flex;"><span><span style="color:#75715e">//手动添加，your password 是生成秘钥时你输入的 passphrase.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>GPG_SIGNING_PASSWORD<span style="color:#f92672">=</span>your password
</span></span></code></pre></div><h4 id="4上传公钥到-openpgp">4：上传公钥到 Openpgp</h4>
<p>因为 <a href="https://s01.oss.sonatype.org/#view-repositories">Nexus repository manager</a> 需要校验签名，所以我们需要把公钥上传到 <a href="https://keys.openpgp.org/">Open pgp</a>。
执行<code>gpg --keyserver [https://keys.openpgp.org/](https://keys.openpgp.org/) --send-keys 58C3084CA8EF5DA8724421A0F50141723D0E90A8</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>/: gpg --keyserver https://keys.openpgp.org/ --send-keys 58C3084CA8EF5DA8724421A0F50141723D0E90A8
</span></span><span style="display:flex;"><span>gpg: sending key 111C6075260DD515 to https://keys.openpgp.org
</span></span></code></pre></div><h2 id="配置-buildgradle">配置 build.gradle</h2>
<h3 id="添加-plugin">添加 plugin</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-groovy" data-lang="groovy"><span style="display:flex;"><span>plugins <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    id <span style="color:#e6db74">&#39;maven-publish&#39;</span>
</span></span><span style="display:flex;"><span>    id <span style="color:#e6db74">&#39;signing&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><h3 id="添加-publish-task">添加 publish task</h3>
<p>参考文档: <a href="https://developer.android.com/studio/publish-library">Android publish library</a></p>
<ol>
<li>project gradle.properties 配置</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-groovy" data-lang="groovy"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">#</span> Logcat Maven
</span></span><span style="display:flex;"><span>logcatGroupId<span style="color:#f92672">=</span>io<span style="color:#f92672">.</span><span style="color:#a6e22e">github</span><span style="color:#f92672">.</span><span style="color:#a6e22e">username</span>
</span></span><span style="display:flex;"><span>logcatArtifactId<span style="color:#f92672">=</span>com<span style="color:#f92672">.</span><span style="color:#a6e22e">leo</span><span style="color:#f92672">.</span><span style="color:#a6e22e">android</span><span style="color:#f92672">.</span><span style="color:#a6e22e">library</span><span style="color:#f92672">.</span><span style="color:#a6e22e">project</span>
</span></span><span style="display:flex;"><span>logcatVersion<span style="color:#f92672">=</span><span style="color:#ae81ff">1.0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">0</span>
</span></span></code></pre></div><ol start="2">
<li>build.gradle android module 配置</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-groovy" data-lang="groovy"><span style="display:flex;"><span>android <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    namespace <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;com.leo.android.project&#39;</span>
</span></span><span style="display:flex;"><span>    publishing <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        singleVariant<span style="color:#f92672">(</span><span style="color:#e6db74">&#39;release&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            withSourcesJar<span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    defaultConfig <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        compileSdk <span style="color:#ae81ff">32</span>
</span></span><span style="display:flex;"><span>        minSdk <span style="color:#ae81ff">8</span>
</span></span><span style="display:flex;"><span>        versionCode <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        versionName <span style="color:#e6db74">&#34;1.0.0&#34;</span>
</span></span><span style="display:flex;"><span>        version <span style="color:#e6db74">&#34;1.0.0-release&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        aarMetadata <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            minCompileSdk <span style="color:#f92672">=</span> <span style="color:#ae81ff">8</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        testFixtures <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            enable <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    buildTypes <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        release <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            minifyEnabled <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>            proguardFiles <span style="color:#a6e22e">getDefaultProguardFile</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#39;proguard-android-optimize.txt&#39;</span><span style="color:#f92672">),</span> <span style="color:#e6db74">&#39;proguard-rules.pro&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    compileOptions <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        sourceCompatibility JavaVersion<span style="color:#f92672">.</span><span style="color:#a6e22e">VERSION_1_8</span>
</span></span><span style="display:flex;"><span>        targetCompatibility JavaVersion<span style="color:#f92672">.</span><span style="color:#a6e22e">VERSION_1_8</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    kotlinOptions <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        jvmTarget <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;1.8&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><ol start="3">
<li>build.gradle publish 配置</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-groovy" data-lang="groovy"><span style="display:flex;"><span><span style="color:#75715e">// https://docs.gradle.org/current/userguide/publishing_maven.html#publishing_maven
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>project<span style="color:#f92672">.</span><span style="color:#a6e22e">afterEvaluate</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    publishing <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">def</span> logcatGroupId <span style="color:#f92672">=</span> project<span style="color:#f92672">.</span><span style="color:#a6e22e">property</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;logcatGroupId&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">def</span> logcatArtifactId <span style="color:#f92672">=</span> project<span style="color:#f92672">.</span><span style="color:#a6e22e">property</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;logcatArtifactId&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">def</span> logcatVersion <span style="color:#f92672">=</span> project<span style="color:#f92672">.</span><span style="color:#a6e22e">property</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;logcatVersion&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">def</span> mavenUserName <span style="color:#f92672">=</span> project<span style="color:#f92672">.</span><span style="color:#a6e22e">property</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;mavenUserName&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">def</span> mavenPassword <span style="color:#f92672">=</span> project<span style="color:#f92672">.</span><span style="color:#a6e22e">property</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;mavenPassword&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        publications <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            release<span style="color:#f92672">(</span>MavenPublication<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                groupId <span style="color:#f92672">=</span> logcatGroupId
</span></span><span style="display:flex;"><span>                artifactId <span style="color:#f92672">=</span> logcatArtifactId
</span></span><span style="display:flex;"><span>                version <span style="color:#f92672">=</span> logcatVersion
</span></span><span style="display:flex;"><span>                from components<span style="color:#f92672">.</span><span style="color:#a6e22e">release</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                pom <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                    name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Project&#34;</span>
</span></span><span style="display:flex;"><span>                    description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Your project description.&#34;</span>
</span></span><span style="display:flex;"><span>                    url <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://github.com/username/project&#34;</span>
</span></span><span style="display:flex;"><span>                    licenses <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                        license <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                            name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;The Apache License, Version 2.0&#34;</span>
</span></span><span style="display:flex;"><span>                            url <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;http://www.apache.org/licenses/LICENSE-2.0.txt&#34;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>                    developers <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                        developer <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                            id <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;userid&#34;</span>
</span></span><span style="display:flex;"><span>                            name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;username&#34;</span>
</span></span><span style="display:flex;"><span>                            email <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;username@gmail.com&#34;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>                    scm <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                        connection <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;scm:git:https://github.com/username/Project.git&#34;</span>
</span></span><span style="display:flex;"><span>                        developerConnection <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;scm:git:https://github.com/username/Project.git&#34;</span>
</span></span><span style="display:flex;"><span>                        url <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://github.com/username/Project.git&#34;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            snapshot<span style="color:#f92672">(</span>MavenPublication<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                groupId <span style="color:#f92672">=</span> logcatGroupId
</span></span><span style="display:flex;"><span>                artifactId <span style="color:#f92672">=</span> logcatArtifactId
</span></span><span style="display:flex;"><span>                version <span style="color:#f92672">=</span> logcatVersion
</span></span><span style="display:flex;"><span>                from components<span style="color:#f92672">.</span><span style="color:#a6e22e">release</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                pom <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                    name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Project&#34;</span>
</span></span><span style="display:flex;"><span>                    description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Your project description.&#34;</span>
</span></span><span style="display:flex;"><span>                    url <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://github.com/username/project&#34;</span>
</span></span><span style="display:flex;"><span>                    licenses <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                        license <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                            name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;The Apache License, Version 2.0&#34;</span>
</span></span><span style="display:flex;"><span>                            url <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;http://www.apache.org/licenses/LICENSE-2.0.txt&#34;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>                    developers <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                        developer <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                            id <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;userid&#34;</span>
</span></span><span style="display:flex;"><span>                            name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;username&#34;</span>
</span></span><span style="display:flex;"><span>                            email <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;username@gmail.com&#34;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>                    scm <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                        connection <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;scm:git:https://github.com/username/Project.git&#34;</span>
</span></span><span style="display:flex;"><span>                        developerConnection <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;scm:git:https://github.com/username/Project.git&#34;</span>
</span></span><span style="display:flex;"><span>                        url <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://github.com/username/Project.git&#34;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        repositories <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            maven <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">def</span> releasesRepoUrl <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;https://s01.oss.sonatype.org/service/local/staging/deploy/maven2/&#39;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">def</span> snapshotsRepoUrl <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;https://s01.oss.sonatype.org/content/repositories/snapshots/&#39;</span>
</span></span><span style="display:flex;"><span>                url <span style="color:#f92672">=</span> version<span style="color:#f92672">.</span><span style="color:#a6e22e">endsWith</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#39;release&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">?</span> releasesRepoUrl <span style="color:#f92672">:</span> snapshotsRepoUrl
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                credentials <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                    username <span style="color:#f92672">=</span> mavenUserName
</span></span><span style="display:flex;"><span>                    password <span style="color:#f92672">=</span> mavenPassword
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// https://docs.gradle.org/current/userguide/signing_plugin.html#sec:signing_publications
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    signing <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">def</span> signingKey <span style="color:#f92672">=</span> findProperty<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;GPG_SIGNING_KEY&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">def</span> signingPassword <span style="color:#f92672">=</span> findProperty<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;GPG_SIGNING_PASSWORD&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>        useInMemoryPgpKeys<span style="color:#f92672">(</span>signingKey<span style="color:#f92672">,</span> signingPassword<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        sign publishing<span style="color:#f92672">.</span><span style="color:#a6e22e">publications</span><span style="color:#f92672">.</span><span style="color:#a6e22e">release</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><blockquote>
<p>Task :library:preBuild UP-TO-DATE
Task :library:preReleaseBuild UP-TO-DATE
Task :library:compileReleaseAidl NO-SOURCE
Task :library:mergeReleaseJniLibFolders UP-TO-DATE
Task :library:mergeReleaseNativeLibs NO-SOURCE
Task :library:stripReleaseDebugSymbols NO-SOURCE
Task :library:copyReleaseJniLibsProjectAndLocalJars UP-TO-DATE
Task :library:compileReleaseRenderscript NO-SOURCE
Task :library:generateReleaseResValues UP-TO-DATE
Task :library:extractDeepLinksForAarRelease UP-TO-DATE
Task :library:generateReleaseBuildConfig UP-TO-DATE
Task :library:generateReleaseResources UP-TO-DATE
Task :library:packageReleaseResources UP-TO-DATE
Task :library:parseReleaseLocalResources UP-TO-DATE
Task :library:processReleaseManifest UP-TO-DATE
Task :library:generateReleaseRFile UP-TO-DATE
Task :library:compileReleaseKotlin UP-TO-DATE
Task :library:extractReleaseAnnotations UP-TO-DATE
Task :library:javaPreCompileRelease UP-TO-DATE
Task :library:compileReleaseJavaWithJavac UP-TO-DATE
Task :library:mergeReleaseGeneratedProguardFiles UP-TO-DATE
Task :library:mergeReleaseConsumerProguardFiles UP-TO-DATE
Task :library:mergeReleaseShaders UP-TO-DATE
Task :library:compileReleaseShaders NO-SOURCE
Task :library:generateReleaseAssets UP-TO-DATE
Task :library:packageReleaseAssets UP-TO-DATE
Task :library:packageReleaseRenderscript NO-SOURCE
Task :library:prepareLintJarForPublish UP-TO-DATE
Task :library:prepareReleaseArtProfile UP-TO-DATE
Task :library:processReleaseJavaRes NO-SOURCE
Task :library:mergeReleaseJavaResource UP-TO-DATE
Task :library:syncReleaseLibJars UP-TO-DATE
Task :library:writeReleaseAarMetadata UP-TO-DATE
Task :library:bundleReleaseAar UP-TO-DATE
Task :library:sourceReleaseJar UP-TO-DATE
Task :library:generateMetadataFileForReleasePublication
Task :library:generatePomFileForReleasePublication
Task :library:signReleasePublication</p></blockquote>
<h3 id="上传-library">上传 Library</h3>
<p>gradle rebuild 之后，查看 gradle task
<img src="assets/images/gradle-task.png" alt="gradle-task"></p>
<p>点击 <code>publishReleasePublicationToMavenRepository</code>，执行以下 tasks 后就可以去 <a href="https://s01.oss.sonatype.org/#stagingRepositories">stagingRepositories</a> 查看 Android studio 上传上了的包了。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>&gt; Task :library:preBuild UP-TO-DATE
</span></span><span style="display:flex;"><span>&gt; Task :library:preReleaseBuild UP-TO-DATE
</span></span><span style="display:flex;"><span>&gt; Task :library:compileReleaseAidl NO-SOURCE
</span></span><span style="display:flex;"><span>&gt; Task :library:mergeReleaseJniLibFolders UP-TO-DATE
</span></span><span style="display:flex;"><span>&gt; Task :library:mergeReleaseNativeLibs NO-SOURCE
</span></span><span style="display:flex;"><span>&gt; Task :library:stripReleaseDebugSymbols NO-SOURCE
</span></span><span style="display:flex;"><span>&gt; Task :library:copyReleaseJniLibsProjectAndLocalJars UP-TO-DATE
</span></span><span style="display:flex;"><span>&gt; Task :library:compileReleaseRenderscript NO-SOURCE
</span></span><span style="display:flex;"><span>&gt; Task :library:generateReleaseResValues UP-TO-DATE
</span></span><span style="display:flex;"><span>&gt; Task :library:extractDeepLinksForAarRelease UP-TO-DATE
</span></span><span style="display:flex;"><span>&gt; Task :library:generateReleaseBuildConfig UP-TO-DATE
</span></span><span style="display:flex;"><span>&gt; Task :library:generateReleaseResources UP-TO-DATE
</span></span><span style="display:flex;"><span>&gt; Task :library:packageReleaseResources UP-TO-DATE
</span></span><span style="display:flex;"><span>&gt; Task :library:parseReleaseLocalResources UP-TO-DATE
</span></span><span style="display:flex;"><span>&gt; Task :library:processReleaseManifest UP-TO-DATE
</span></span><span style="display:flex;"><span>&gt; Task :library:generateReleaseRFile UP-TO-DATE
</span></span><span style="display:flex;"><span>&gt; Task :library:compileReleaseKotlin UP-TO-DATE
</span></span><span style="display:flex;"><span>&gt; Task :library:extractReleaseAnnotations UP-TO-DATE
</span></span><span style="display:flex;"><span>&gt; Task :library:javaPreCompileRelease UP-TO-DATE
</span></span><span style="display:flex;"><span>&gt; Task :library:compileReleaseJavaWithJavac UP-TO-DATE
</span></span><span style="display:flex;"><span>&gt; Task :library:mergeReleaseGeneratedProguardFiles UP-TO-DATE
</span></span><span style="display:flex;"><span>&gt; Task :library:mergeReleaseConsumerProguardFiles UP-TO-DATE
</span></span><span style="display:flex;"><span>&gt; Task :library:mergeReleaseShaders UP-TO-DATE
</span></span><span style="display:flex;"><span>&gt; Task :library:compileReleaseShaders NO-SOURCE
</span></span><span style="display:flex;"><span>&gt; Task :library:generateReleaseAssets UP-TO-DATE
</span></span><span style="display:flex;"><span>&gt; Task :library:packageReleaseAssets UP-TO-DATE
</span></span><span style="display:flex;"><span>&gt; Task :library:packageReleaseRenderscript NO-SOURCE
</span></span><span style="display:flex;"><span>&gt; Task :library:prepareLintJarForPublish UP-TO-DATE
</span></span><span style="display:flex;"><span>&gt; Task :library:prepareReleaseArtProfile UP-TO-DATE
</span></span><span style="display:flex;"><span>&gt; Task :library:processReleaseJavaRes NO-SOURCE
</span></span><span style="display:flex;"><span>&gt; Task :library:mergeReleaseJavaResource UP-TO-DATE
</span></span><span style="display:flex;"><span>&gt; Task :library:syncReleaseLibJars UP-TO-DATE
</span></span><span style="display:flex;"><span>&gt; Task :library:writeReleaseAarMetadata UP-TO-DATE
</span></span><span style="display:flex;"><span>&gt; Task :library:bundleReleaseAar UP-TO-DATE
</span></span><span style="display:flex;"><span>&gt; Task :library:sourceReleaseJar UP-TO-DATE
</span></span><span style="display:flex;"><span>&gt; Task :library:generateMetadataFileForReleasePublication
</span></span><span style="display:flex;"><span>&gt; Task :library:generatePomFileForReleasePublication
</span></span><span style="display:flex;"><span>&gt; Task :library:signReleasePublication
</span></span></code></pre></div><h2 id="release">Release</h2>
<p>登录 <a href="https://s01.oss.sonatype.org/#stagingRepositories">stagingRepositories</a>，点击你的 respository, 点击 Activity。如果校验成功点击 Close, 然后点击 Release.
Lirary 就 release 成功了。等几个小时后就可以去 <a href="https://search.maven.org/">Maven Central Search</a> 中 搜索你的 Library 了。
<img src="assets/images/maven-release.png" alt="maven-release"></p>
</article>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
<script type="application/javascript" src='http://localhost:54865/leoandroid/leo.github.io/js/toc.js'></script>
<link rel="stylesheet" href='http://localhost:54865/leoandroid/leo.github.io/css/toc.css' />

  
</div>

  <div class="footer container-xl width-full p-responsive">
  <div
    class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between flex-sm-items-center pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <a aria-label="Homepage" title="GitHub" class="footer-octicon d-none d-lg-block mr-lg-4" href="http://localhost:54865/leoandroid/leo.github.io/">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24">
        <path fill-rule="evenodd"
          d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
        </path>
      </svg>
    </a>
    <ul class="list-style-none d-flex flex-wrap col-12 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
      
      <li class="mr-3 mr-lg-0">Theme by <a href='https://github.com/MeiK2333/github-style'>github-style</a></li>
      
      <li class="mr-3 mr-lg-0">GitHub and the Invertocat logo are trademarks of <a href="https://github.com/">GitHub, Inc.</a></li>
    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>


</div>

</body>

<script type="application/javascript" src="http://localhost:54865/leoandroid/leo.github.io/js/github-style.js"></script>







</html>